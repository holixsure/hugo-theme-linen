{{ define "main" }}
  <div class="posts">
    {{ range .Pages.ByDate.Reverse }}
    <article class="post-card mb-3">
      <h2 class="post-title">
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </h2>
      <div class="post-meta mb-1">
        <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
        {{ with .Params.categories }}
        <span class="post-categories">
          {{ range . }}
            <a href="{{ "categories/" | relURL }}{{ . | urlize }}">{{ . }}</a>
          {{ end }}
        </span>
        {{ end }}
      </div>
      <div class="post-summary mb-1">
        {{ $raw := .RawContent }}
        {{ $more := "<!-- more -->" }}
        {{ if strings.Contains $raw $more }}
          {{ $split := strings.Split $raw $more }}
          {{ index $split 0 | markdownify }}
        {{ else }}
          {{ .Summary }}
        {{ end }}
      </div>
      <a href="{{ .RelPermalink }}" class="post-read-more">阅读全文 →</a>
    </article>
    {{ end }}
  </div>
{{ end }}